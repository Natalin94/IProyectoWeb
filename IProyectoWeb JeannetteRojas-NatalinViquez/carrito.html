<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Products</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/jquery-1.11.2.min.js"><\/script>')</script>
	<script src="js/materialize.min.js" ></script>
	<script src="js/main.js" ></script>
	
</head>
<body>

	<style type="text/css">
		h5{
			text-align: center;
			font-family: Arial;
		}

	</style>

	<nav class="NavBar full">
		<div class="row">
			<div class="tittles NavBar-logo col s12 m3">Zapateria Online..</div>
			<ul class="NavBar-links col m9">
				<li><a href="index.html" class="waves-effect">Home</a></li>
				<li><a href="products.html" class="waves-effect">Products</a></li>
			</ul>
			<i class="zmdi zmdi-more-vert full btn-menu hide-on-med-and-up waves-effect"></i>
		</div>
	</nav>
	<div class="full ShoppingCart valign-wrapper">
		<div class="container valign">
			<div class="row valign-wrapper">
				<div class="col s12 m6 valign">
					<p class="center-align" style="color: #2F9FF3;">
						<i class="zmdi zmdi-shopping-cart zmdi-hc-5x"></i>		
					</p>
					<p class="center-align">
						<a class="btn-floating waves-effect waves-light red tooltipped" data-position="bottom" data-tooltip="Empty cart" style="margin-right: 17px;"><i class="zmdi zmdi-delete"></i></a>
						<a class="btn-floating waves-effect waves-light green tooltipped" data-position="bottom" data-tooltip="Confirm purchase"><i class="zmdi zmdi-money"></i></a>
					</p>
				</div>
				<div class="col s12 m6 valign">
					<table class="centered highlight responsive-table">
				        <thead>
				          	<tr>
								<th>Product</th>
								<th>Price</th>
				          	</tr>
				        </thead>
				        <tbody>
					        <tr>
					            <td>Product #1</td>
					            <td>$7</td>
					        </tr>
					        <tr>
					            <td>Product #2</td>
					            <td>$7</td>
					        </tr>
					        <tr>
					            <td>Product #3</td>
					            <td>$7</td>
					        </tr>
				        	<tr>
				        		<td>Total</td>
				        		<td>$21</td>
				        	</tr>
				        </tbody>
      				</table>	
				</div>
			</div>
		</div>
	</div>

		<section>
			<h5>Mi carrito</h5>
		<div class="container">
			<div class="row">

			<script type="text/javascript">

			

			arregloZ = localStorage.getItem("listaCarro");
			arregloZ = JSON.parse(arregloZ);

			arregloProductos = localStorage.getItem("productos");
			arregloProductos = JSON.parse(arregloProductos);
			
			
			$(document).ready(function(){ 
			debugger; 
		        $(document).ready(function(){   
		        
	       		for(var i=0, l=arregloZ.length; i < l; i++) {
	       			debugger;

	       			if(arregloZ[i].id == sessionStorage.getItem("username")){
	       				
	       				for (var j=0, n=arregloProductos.length; j < n; j++){
	       					if(arregloProductos[j].id == arregloZ[i].idZap){
	       						addElement(arregloProductos[j].imagen)
		       					debugger;	
	       					}		
	       				}
	       			}	        								
	        	} 
		       	

		        function addElement (url) { 
				  // crea un nuevo div 
				  // y a침ade contenido 
				  var newDiv = document.createElement("div"); 
				  var x = document.createElement("IMG");
    			  //x.setAttribute("src", "images/zap2.jpg");
    			  x.setAttribute("src", url);
    			  x.setAttribute("width", "250");
    			  x.setAttribute("height", "270");
    			  
    			  var butListaDeseos = document.createElement("INPUT");
    			  var butCarrito = document.createElement("INPUT");

    			  butListaDeseos.setAttribute("type", "button");
    			  butListaDeseos.setAttribute("value", "Eliminar");
    			  butListaDeseos.setAttribute("class", "eliminarB");
    			  //butListaDeseos.setAttribute("id",elemento);


    			  butCarrito.setAttribute("type", "button");    			 
    			  butCarrito.setAttribute("value", "Comprar");
    			  butCarrito.setAttribute("class", "listaCarrito");
    			 // butCarrito.setAttribute("id",elemento);


				  // a침ade el elemento creado y su contenido al DOM 
				  var currentDiv = document.getElementById("div1"); 
				  document.getElementById("myHeader").appendChild(newDiv);
				  document.getElementById("myHeader").appendChild(x);
				  document.getElementById("myHeader").appendChild(butListaDeseos);
				  document.getElementById("myHeader").appendChild(butCarrito);
				  //document.body.insertBefore(newDiv, currentDiv); 
				}   
				
				$(".listaCarrito").click(function(){
					arregloCarro = localStorage.getItem("listaCarro")
					botonId= this.id;
					debugger;
					if (arregloCarro == null){
						array=[];
						localStorage.setItem("listaCarro",array);
						alert("Entro al if")
						agregarAlCarro(true, botonId);
					}
					else{
						alert("Entr칩 al else")
						agregarAlCarro(false, botonId);
					}		
						
				});

				function agregarAlCarro(indicador, idBoton){

					if (indicador == true){
						arregloCarro = localStorage.getItem("listaCarro")
					}

					if (indicador == false){
						arregloCarro = localStorage.getItem("listaCarro")
						arregloCarro = JSON.parse(arregloCarro);
					}
				
					array=[]
					for(var i=0, l=arregloCarro.length; i < l; i++) {
						//document.write(arregloDeseos[i])
						array.push(arregloCarro[i]);						
		        	} 
		        	debugger;

		        	var persona = {
						id : sessionStorage.username,
						idZap : idBoton
					};	
		        	prueba= JSON.stringify(persona);
					array.push(persona);
					localStorage.setItem("listaCarro",JSON.stringify(array));
				}

		    });		

		 });    

			</script>
			</div>
		</div>
		</section>

		<section id="myHeader">
		<div id="demo" class="container">
			<div class="row">
			

			</div>
	 </div>
</section>

	<footer class="footer">
		<div class="container">
			<div class="row">
				<div class="col s12 m6">
					<h5>Informaci칩n</h5>
								<ul class="links">
									<li><a href="#">Metodos de pago</a></li>
									<li><a href="#">Codigo de compra</a></li>
									<li><a href="#">Logistica de la empresa</a></li>
				</div>
				<div class="col s12 m6">
					<h5 class="center-align">Contactanos</h5>
					<ul class="center-align">
						<li><a href="#!"><i class="zmdi zmdi-facebook"></i> &nbsp; Facebook</a></li>
						<li><a href="#!"><i class="zmdi zmdi-twitter"></i> &nbsp; Twitter</a></li>
						<li><a href="#!"><i class="zmdi zmdi-google-plus"></i> &nbsp; Google+</a></li>
						<li><a href="#!"><i class="zmdi zmdi-instagram"></i> &nbsp; Instagram</a></li>
					</ul>	
				</div>
				<div class="col s12 tittles footer-copyright">zap &copy; 2016</div>
			</div>
		</div>
	</footer>
</body>
</html>