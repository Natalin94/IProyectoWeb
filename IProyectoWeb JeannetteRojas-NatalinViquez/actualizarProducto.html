<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <title>Actualización de Productos</title>

    <!-- Bootstrap Core CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="assets/css/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="assets/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <script type="text/javascript">

    /*var arregloProductoGuardar= [{id : 'zap1', nombre : "Cat", descripcion : "Lindo", precio : 2000, cantidad : 50, imagen:"http://media15.liverpool.com.mx/web/images/products/es_MX/xl/1034253206.jpg", categoria: "Mujer" } , {id : 'zap2', nombre : "Cat", descripcion : "Lindo", precio : 2000, cantidad : 50, imagen:"http://www.play-school.es/images/images/category_7/Caterpillar-Bruin-CL281C9Z-Zapatillas-Bajas-Hombre-Zapatos.jpg", categoria: "Hombre" }]

            localStorage.setItem("productos",JSON.stringify(arregloProductoGuardar));*/

            
        var producto = function(idP, nombreP, descripcion, precio, cantidad,categoria,imagen) {
            //body...
            this.idP = idP;
            this.nombreP = nombreP;
            this.descripcion = descripcion;
            this.precio = precio;
            this.cantidad = cantidad;
            this.categoria = categoria;
            this.imagen = imagen;
        }
        $(document).ready(function(){
            debugger;
            $('#bCargarDatos').click(function(){
                arregloP = localStorage.getItem("productos");
                arregloP = JSON.parse(arregloP);
                array=[]
                for (var i=0, l = arregloP.length; i<l; i++){
                    array.push(arregloP[i]);                       
                    var idBuscar = document.getElementById("id").value;
                    debugger;
                    console.log("Paso por aca");
                    if(arregloP[i].idP == idBuscar){
                        debugger;
                        //cargar datos
                        alert('encontrado');
                        debugger;
                        document.getElementById("nombre").value = arregloP[i].nombreP;
                        document.getElementById("descripcion").value = arregloP[i].descripcion;
                        debugger;
                        document.getElementById("precio").value = arregloP[i].precio;
                        debugger
                        document.getElementById("cantidad").value = arregloP[i].cantidad;
                        document.getElementById("categoria").value= arregloP[i].categoria;
                        document.getElementById("imagen").value = arregloP[i].imagen;
                        debugger;
                        break;
                        debugger;
                    }
                    else{
                        //alert('Intenta con otro id.');
                    }
                    alert('intenta con otro');

                }

            });

            $('#bActualizar').click(function(){
                debugger;
                var idV = localStorage.getItem("productos").idV;
                var nombrePV = document.getElementById("nombre").value;
                var descripcionV = document.getElementById("descripcion").value;
                var precioV = document.getElementById("precio").value;
                var cantidadV = document.getElementById("cantidad").value;
                var categoriaV = document.getElementById("categoria").value;
                var imagenV = document.getElementById("imagen").value;

                var nuevoProducto = new producto (idV,nombrePV,descripcionV,precioV,cantidadV,categoriaV,imagenV);
                //localStorage.setItem(idV, JSON.stringify(nuevoProducto));
                debugger;
                arregloP = localStorage.getItem("productos");
                arregloP = JSON.parse(arregloP);
                array=[]
                for(var i=0, l=arregloP.length; i < l; i++) {
                        document.write(arregloP[i])
                        array.push(arregloP[i]);                       
                    }
                array.push(nuevoProducto);
                localStorage.setItem("productos",JSON.stringify(array));
                alert("Producto actualizado");

                /*Limpiando los campos o inputs*/

                document.getElementById("id").value = "";
                document.getElementById("nombre").value = "";
                document.getElementById("descripcion").value = "";
                document.getElementById("precio").value = "";
                document.getElementById("cantidad").value = "";
                document.getElementById("categoria").value= "";
                document.getElementById("imagen").value = "";

            });

         });

    </script>

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="indexPrincipal.html">Cerar sesión</a>
            </div>
            <!-- /.navbar-header -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">                       
                        <li>
                            <a href="administrador.html"><i style="font-size:20px"></i> Productos<span></span></a>
                            
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="reportes.html"><i style="font-size:20px"></i> Consultas</a>
                        </li>
                       
                        
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Actualización de productos</h1>
                    <script type="text/javascript">
                    //document.write("Bienvenido(a) " + sessionStorage.username + "<br>");
                    </script>

                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Información del producto
                        </div>
                        <div class="panel-body">
                            <div class="row" >
                                <div class="col-lg-6">
                                    <form role="form" id="form1">
                                        <div class="form-group">
                                            <label>Ingrese el identificador del producto</label>
                                            <input class="form-control" placeholder="Identificador" id="id">
                                            <span class="input-group-btn">
                                            </span>
                                        </div> 
                                        <div class="form-group">
                                            <button id="bCargarDatos">Cargar Datos</button>
                                        </div>
                                        <div class="form-group">
                                            <label>Nombre del producto</label>
                                            <input class="form-control" placeholder="Nombre" id="nombre">
                                        </div>
                                        <div class="form-group">
                                            <label>Descripción</label>
                                            <input class="form-control" placeholder="Descripción" id="descripcion">
                                        </div>
                                        <div class="form-group">
                                            <label>Precio</label>
                                            <input class="form-control" placeholder="Precio" id="precio">
                                        </div>
                                        <div class="form-group">
                                            <label>Cantidad</label>
                                            <input class="form-control" placeholder="Cantidad" id="cantidad">
                                        </div>
                                        <div class="form-group">
                                            <label>Categoría</label><br>
                                            <input class="form-control" placeholder="Categoria" id="categoria">
                                            <label><input type="checkbox" id="categoriaM" value="first_checkbox"> Mujer</label><br>
                                            <input type="checkbox" id="categoriaH" value="second_checkbox"> <label for="cbox2">Hombre</label><br>
                                            <input type="checkbox" id="categoriaN" value="second_checkbox"> <label for="cbox3">Niños</label>
                                        </div>
                                        <div class="form-group">
                                            <label>Imagen</label>
                                            <input class="form-control" placeholder="URL" id="imagen">
                                        </div>                                      
                                    
                                        <a href="administrador.html" class="btn btn-default">Atrás</a>

                                        <button type="reset" class="btn btn-default">Cancelar </button>  
                                        <button id="bActualizar" class="btn btn-default">Actualizar producto</button>
                                    </form>
                                </div>
                                <div class="col-lg-6">
                                                                    
                                </div>
                                <div id="resultado"></div>
                                <!-- /.col-lg-6 (nested) -->
                                
                                <!-- /.col-lg-6 (nested) -->
                            </div>
                            <!-- /.row (nested) -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /#page-wrapper -->

    </div>


</body>

</html>
