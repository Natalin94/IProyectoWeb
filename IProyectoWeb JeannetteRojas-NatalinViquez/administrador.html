<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <title>Mantenimiento de Productos</title>

    <!-- Bootstrap Core CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="assets/css/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="assets/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <script type="text/javascript">

    /*var arregloProductoGuardar= [{id : 'zap1', nombre : "Cat", descripcion : "Lindo", precio : 2000, cantidad : 50, imagen:"http://media15.liverpool.com.mx/web/images/products/es_MX/xl/1034253206.jpg", categoria: "Mujer" } , {id : 'zap2', nombre : "Cat", descripcion : "Lindo", precio : 2000, cantidad : 50, imagen:"http://www.play-school.es/images/images/category_7/Caterpillar-Bruin-CL281C9Z-Zapatillas-Bajas-Hombre-Zapatos.jpg", categoria: "Hombre" }]

            localStorage.setItem("productos",JSON.stringify(arregloProductoGuardar));*/

            
        var producto = function(idP, nombreP, descripcion, precio, cantidad,categoria,imagen) {
            // body...
            this.idP = idP;
            this.nombreP = nombreP;
            this.descripcion = descripcion;
            this.precio = precio;
            this.cantidad = cantidad;
            this.categoria = categoria;
            this.imagen = imagen;
        }
        $(document).ready(function(){
            debugger;

            $('#bAgregar').click(function(){
                debugger;
                var idV = document.getElementById("id").value; 
                var nombrePV = document.getElementById("nombre").value;
                var descripcionV = document.getElementById("descripcion").value;
                var precioV = document.getElementById("precio").value;
                var cantidadV = document.getElementById("cantidad").value;
                var categoriaV = document.getElementById("categoria").value;
                var imagenV = document.getElementById("imagen").value;

                var nuevoProducto = new producto (idV,nombrePV,descripcionV,precioV,cantidadV,categoriaV,imagenV);
                //localStorage.setItem(idV, JSON.stringify(nuevoProducto));
                debugger;
                arregloP = localStorage.getItem("productos");
                arregloP = JSON.parse(arregloP);
                array=[]
                for(var i=0, l=arregloP.length; i < l; i++) {
                        document.write(arregloP[i])
                        array.push(arregloP[i]);                       
                    }
                array.push(nuevoProducto);
                localStorage.setItem("productos",JSON.stringify(array));
                alert("Producto agregado");
                
                /*Guardando los datos en el LocalStorage*/

                /*Limpiando los campos o inputs*/

                document.getElementById("id").value = "";
                document.getElementById("nombre").value = "";
                document.getElementById("descripcion").value = "",
                document.getElementById("precio").value = "";
                document.getElementById("cantidad").value = "";
                document.getElementById("categoria").value= "";
                document.getElementById("imagen").value = "";
        });

            $('#bEliminar').click(function(){
                debugger;
                arregloP = localStorage.getItem("productos");
                arregloP = JSON.parse(arregloP);
                array=[]
                for (var i=0, l = arregloP.length; i<l; i++){
                    array.push(arregloP[i]);                       
                    var idEliminar = document.getElementById("id").value;
                    debugger;
                    if(array[i].id == idEliminar){
                        debugger;
                        //funcion eliminar
                        //array.splice(i,1);
                        delete array[i];
                        //localStorage.removeItem(idEliminar);

                        debugger;
                        alert('producto eliminado');
                        //localStorage.setItem("productos",JSON.stringify(array));

                    }
                    else{
                        alert('no lo encuentra');
                    }
                }
                localStorage.setItem("productos",JSON.stringify(array));

                
            });

    });

    </script>

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Inicio</a>
            </div>
            <!-- /.navbar-header -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li class="sidebar-search">
                            <div class="input-group custom-search-form">
                                <input type="text" class="form-control" placeholder="Search...">
                                <span class="input-group-btn">
                                <button class="btn btn-default" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                            </div>
                            <!-- /input-group -->
                        </li>
                       
                        <li>
                            <a href="#"><i style="font-size:20px"></i> Productos<span></span></a>
                            
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#"><i style="font-size:20px"></i> Reportes</a>
                        </li>
                       
                        
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Mantenimiento de productos</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Información del producto
                        </div>
                        <div class="panel-body">
                            <div class="row" >
                                <div class="col-lg-6">
                                    <form role="form" id="form1">
                                        <li class="sidebar-search">
                                            <label>Ingrese el identificador del producto</label>
                                             <div class="input-group custom-search-form">
                                             <input class="form-control" placeholder="Identificador" id="id">
                                             <span class="input-group-btn">
                                             </span>
                                             </div>
                                         </li>
                                        <div class="form-group">
                                            <label>Nombre del producto</label>
                                            <input class="form-control" placeholder="Nombre" id="nombre">
                                        </div>
                                        <div class="form-group">
                                            <label>Descripción</label>
                                            <input class="form-control" placeholder="Descripción" id="descripcion">
                                        </div>
                                        <div class="form-group">
                                            <label>Precio</label>
                                            <input class="form-control" placeholder="Precio" id="precio">
                                        </div>
                                        <div class="form-group">
                                            <label>Cantidad</label>
                                            <input class="form-control" placeholder="Cantidad" id="cantidad">
                                        </div>
                                        <div class="form-group">
                                            <label>Categoría</label><br>
                                            <input class="form-control" placeholder="Categoria" id="categoria">
                                            <label><input type="checkbox" id="categoriaM" value="first_checkbox"> Mujer</label><br>
                                            <input type="checkbox" id="categoriaH" value="second_checkbox"> <label for="cbox2">Hombre</label><br>
                                            <input type="checkbox" id="categoriaN" value="second_checkbox"> <label for="cbox3">Niños</label>
                                        </div>
                                        <div class="form-group">
                                            <label>Imagen</label>
                                            <input class="form-control" placeholder="URL" id="imagen">
                                        </div>                                      
                                    
                                        <h4><a id="bAgregar" href='administrador.html'>Agregar producto</a></h4>

                                        <button type="reset" class="btn btn-default">Cancelar </button>
                                    </form>
                                </div>
                                <div class="col-lg-6">
                                    <button id="bEliminar" type="submit" class="btn btn-default">Eliminar producto</button>  
                                    <button type="submit" class="btn btn-default">Actualizar producto</button>                                
                                </div>
                                <div id="resultado"></div>
                                <!-- /.col-lg-6 (nested) -->
                                
                                <!-- /.col-lg-6 (nested) -->
                            </div>
                            <!-- /.row (nested) -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="../vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>

</body>

</html>
